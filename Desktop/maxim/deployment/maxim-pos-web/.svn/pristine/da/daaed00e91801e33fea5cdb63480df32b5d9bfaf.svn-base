<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cc="http://java.sun.com/jsf/composite/components"
                xmlns:sec="http://www.springframework.org/security/tags"
                template="/templates/main.xhtml">
    <ui:define name="title">
        <cc:titleText title="#{msg['pos']['taskJobLog']}"/>
    </ui:define>
    <ui:define name="content">
        <style>
            .taskJobLogDataTable table tbody td {
                white-space: normal;
                word-wrap: break-word;
            }
        </style>
        <script>
            function checkElementSelection() {
                if (PF('taskJobLogDataTableVar').selection.length == 0) {
                    PF('infoDialog').show();
                    return false;
                } else {
                    return true;
                }
            }
        </script>
        <h:form id="taskJobLogDataTableForm">
            <p:panel header="#{msg['common']['search']}" style="width: 100%;">
                <div class="ui-grid ui-grid-responsive">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-8">
                            <h:outputLabel for="name" value="#{msg['pos']['branchCode']}"/>
                            <p:inputText id="name"
                                         value="#{taskJobLogController.dataModel.dataModelQuery.criteria.branchCode}"
                                         label="#{msg['common']['name']}" maxlength="100"
                                         style="width: 164px;"/>
                            <p:commandButton id="searchButton"
                                             value="#{msg['common']['search']}"
                                             update="taskJobLogDataTable" icon="ui-icon-search1"
                                             style=" margin-left: 10px;"/>
                        </div>
                    </div>

                </div>
            </p:panel>
            <cc:spacer/>
            <p:dataTable id="taskJobLogDataTable" styleClass="taskJobLogDataTable"
                         widgetVar="taskJobLogDataTableVar" var="element"
                         value="#{taskJobLogController.dataModel}"
                         selection="#{taskJobLogController.taskJobLog}"
                         paginator="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="15" rows="15" lazy="true" dynamic="true"
                         emptyMessage="#{msg['common']['noRecord']}" rowKey="#{element.id}">

                <f:facet name="header">
                    <p:graphicImage value="/images/record16.png"/>
                    <h:outputText value="#{msg['pos']['taskJobLog']}"/>
                </f:facet>
                <p:column headerText="#{msg['pos']['scheduleJobId']}" visible="false">
                    <h:outputText value="#{element.scheduleJobId}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['taskName']}">
                    <h:outputText value="#{element.taskName}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['pollSchemeID']}" visible="false">
                    <h:outputText value="#{element.pollSchemeID}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['dependOn']}">
                    <h:outputText value="#{element.dependOn}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['branchCode']}">
                    <h:outputText value="#{element.branchCode}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['pollSchemeName']}">
                    <h:outputText value="#{element.pollSchemeName}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['pollSchemeType']}">
                    <h:outputText value="#{element.pollSchemeType}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['direction']}">
                    <h:outputText value="#{element.direction}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['startTime']}">
                    <h:outputText value="#{element.startTime}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['endTime']}">
                    <h:outputText value="#{element.endTime}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['lastestJobInd']}">
                    <h:outputText value="#{element.lastestJobInd}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['status']}">
                    <h:outputText value="#{element.status}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['errorCode']}">
                    <h:outputText value="#{element.errorCode}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['errorMsg']}">
                    <h:outputText value="#{element.errorMsg}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['pollBranchId']}">
                    <h:outputText value="#{element.pollBranchId}"/>
                </p:column>
                <p:column headerText="#{msg['pos']['pollSchemedesc']}">
                    <h:outputText value="#{element.pollSchemedesc}"/>
                </p:column>
            </p:dataTable>
        </h:form>

    </ui:define>
</ui:composition>
